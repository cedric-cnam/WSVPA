% !TEX root = main.tex
%

\subsection*{Alternative Algorithm for best-search}
We associate to the \SWVPA $A$ a $\Semiring$-labeled graph
$\G_A = \< V_A, E_A, \eta_A >$
with set of vertices $V_A = (Q \times Q) \cup (Q \times P \times Q)$,
set of edges $E_A = V_A \times V_A$, and with an edge labelling  
$\eta_A : E_A \to \Semiring$ defined as follows,
for $q_0, q_1, q_2, q_3 \in Q$, $p, p' \in P$:
%
\[
\begin{array}{rclcl}
\< q_0, q_1> & \to & \< q_0, q_2> & : &
\bigoplus_{\Deltai} \weiei(q_1, q_2)\\
%
\< q_1, p, q_2> & \to & \<q_0, q_3> & : &
\bigoplus_{\Deltac} \bigl( \weiec(q_0, p, q_1) \otimes \bigoplus^2_{\Deltar} \weir(q_2, p, q_3)\bigr)\\ 
%
\< q_0, q_2> & \to & \< q_0, q_3> & : & 
\bigoplus_{\Deltar} \weier(q_2, q_3)\\
% 
\< q_0, p, q_1> & \to & \< q_0, p, q_2> & : &
\bigoplus_{\Deltai} \weii(q_1, p, q_2)\\[1mm]
%
\< q_1, p', q_2> & \to & \< q_0, p, q_3> & : &
\bigoplus^2_{\Deltac} \bigl[ \weic(q_0, p, p', q_1) \otimes_2 {\bigoplus_{\Deltar}} \weir(q_2, p', q_3) \bigr]\\
\end{array}
\]
Removing from $\G_A$ every edge $e \in E_A$ such that $\eta(e) = \zero$ 
is preserving the results below.
%
A \emph{path} of $\G_A$ is a sequence $e_1,\ldots, e_n \in V^*_A$ such that 
for all $1 \leq i < n$, the second component of $e_i$ is the first component of $e_{i+1}$.
We write $\src(\pi) = e_1$ and $\trg(\pi) = e_n$.
The weight of the path is $\weight(\pi) = \bigotimes_{i=1}^{n} \eta(e_i)$.

%Intuitively, 
\begin{lemma}[Correctness]
For all $q_0, q_1, q_2 \in Q$, $p\in P$, 
and all path $\pi$ of $\G_A$ with $\src(\pi) = \<q_0, q_0>$,
($i$) if $\trg(\pi) = \< q_1, q_2>$, 
then there exists $u \in \Delta^*$ such that 
$\weight_A(q_1[\bot], u, q_1[\bot]) = \weight(\pi)$,
%
($ii$) if $\trg(\pi) = \< q_1, p, q_2>$,
then there exists $v \in \Delta^*$ such that 
${\displaystyle\bigoplus_{c \in \Deltac}}
 \weight_A\bigl(\configup{q_1}{\< c, p> \stackup \top }, v, \configup{q_2}{\<c, p> \stackup \top}\bigr)
 = \weight(\pi)$.
\end{lemma}
%
\begin{proof}
We prove ($i$) and ($ii$) simultaneously by induction on the length of the path $\pi$.
...\qed
\end{proof}



\begin{lemma}[Completeness]
For all $q_1, q_2 \in Q$, $p\in P$, 
($i$) there exists a path $\pi$ of $\G_A$ 
such that $\src(\pi) = \<q_0, q_0>$ for some $q_0 \in Q$, 
$\trg(\pi) = \< q_1, q_2>$,
and $\weight(\pi) = b_\bot(q_1, q_2)$, 
($ii$) there exists a path $\pi'$ of $\G_A$ 
such that $\src(\pi) = \<q_0, q_0>$ for some $q_0 \in Q$, 
$\trg(\pi) = \< q_1, p, q_2>$,
and $\weight(\pi) = b_\top(q_1, q_2)$.
\end{lemma}
%
\begin{proof}
Since $\Semiring$ is  total, there exists $t \in \Delta^*$ such that  
$b_\bot(q_1, q_2) = \weight_A\bigl(\config{q_1}{\bot}, t, \config{q_2}{\bot}\bigr)$.
We represent a computation of $A$ on $t$ by a sequence of transitions...

We show that we can construct a path $\pi$ from $t$.
...\qed
\end{proof}




